# âœ… 1. ê°€ë²¼ìš´ Node.js 20 ë²„ì „ ì‚¬ìš©
FROM node:20-alpine

# âœ… 2. ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
WORKDIR /app

# âœ… 3. package.json ë° package-lock.json ë¨¼ì € ë³µì‚¬ (ìºì‹± ìµœì í™”)
COPY package*.json ./

# âœ… 4. TypeScript, Node.js íŒ¨í‚¤ì§€ ì„¤ì¹˜
RUN npm install

# âœ… 5. ë‚˜ë¨¸ì§€ ëª¨ë“  ì½”ë“œ ë³µì‚¬
COPY . .

# âœ… 6. í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ ì¶”ê°€
COPY .env .env

# âœ… 7. TypeScript ë¹Œë“œ ì‹¤í–‰ (ğŸš¨ dist/main.jsê°€ ìƒì„±ë˜ëŠ”ì§€ í™•ì¸)
RUN npm run build && ls -al dist/

# âœ… 8. ì‹¤í–‰ ê¶Œí•œ ë³€ê²½ ì œê±° (í•„ìš” ì—†ìŒ)
# RUN chmod +x ./dist/main.js  ğŸš¨ í•„ìš” ì—†ìŒ

# âœ… 9. í¬íŠ¸ ê°œë°©
EXPOSE 3000

# âœ… 10. ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ ì„œë²„ ì‹œì‘
CMD ["node", "dist/main.js"]
